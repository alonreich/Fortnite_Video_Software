ISSUE RANKING REPORT - Fortnite Video Software
================================================

Ranked from most urgent (1) to less urgent (5). Major issues that affect end user experience.

ISSUE #1: Inconsistent GPU Pipeline (hwdownload overhead)
---------------------------------------------------------
File: processing/filter_builder.py
Current Behavior: When using NVIDIA GPU acceleration for mobile layout with text overlay, the filter graph includes "hwdownload" which copies video from GPU VRAM back to system RAM, then does CPU processing, then uploads again. This creates a huge performance bottleneck.
Why it's a problem: Slows down rendering by 2-3x, increases CPU load, reduces GPU efficiency.
Fixed Behavior: When text overlay is needed, fall back to CPU processing entirely (no hwdownload/hwupload). Already implemented in fix.

ISSUE #2: Missing Hardware Decoding (hwaccel flags)
---------------------------------------------------
File: processing/worker.py
Current Behavior: The hw_flags list is always empty. No hardware decoding is used when reading input video, even when GPU encoding is active. This forces CPU decoding, which limits overall GPU pipeline speed.
Why it's a problem: CPU becomes bottleneck for high-resolution videos; GPU sits idle during decode phase. Wastes potential performance.
Fixed Behavior: Add appropriate hwaccel flags based on encoder strategy: NVIDIA -> -hwaccel cuda -hwaccel_output_format cuda; AMD -> -hwaccel d3d11va -hwaccel_output_format d3d11; Intel -> -hwaccel qsv -hwaccel_output_format qsv.

ISSUE #3: Granular Speed Segments Not GPU-Optimized
----------------------------------------------------
File: processing/filter_builder.py (build_granular_speed_chain)
Current Behavior: Speed changes are applied via setpts filter which runs on CPU. When GPU acceleration is enabled, the video is downloaded to CPU for speed processing, then uploaded back to GPU for encoding.
Why it's a problem: Breaks GPU pipeline, adds extra memory transfers, reduces performance for complex speed edits.
Fixed Behavior: Implement GPU‑based speed adjustment using the `setpts` filter with CUDA (if possible) or keep CPU path but avoid unnecessary hwdownload/hwupload cycles.

ISSUE #4: NVENC Settings Not Optimal for Fast Motion
-----------------------------------------------------
File: processing/encoders.py
Current Behavior: NVENC preset "p4" (default) is tuned for quality, not speed. For gaming videos with fast motion, this can cause blurring and lower visual quality.
Why it's a problem: Fast‑paced Fortnite gameplay needs crisp frames; slower preset reduces bitrate efficiency.
Fixed Behavior: Switch to preset "p1" (fastest), enable B‑frames (bf 3), multipass fullres, and b_ref_mode middle for better motion handling. Already implemented.

ISSUE #5: Potential Dead Code / Zombie Callbacks
-------------------------------------------------
Files: developer_tools/ (out of bounds), but within processing/ there may be unused functions. Need to verify if any callbacks are registered but never triggered.
Current Behavior: Codebase has many utility functions; some may be leftover from earlier versions.
Why it's a problem: Increases maintenance complexity, may cause confusion, could hide bugs.
Fixed Behavior: Perform static analysis to identify unused functions and remove them. (Lower priority, can be done later.)

ISSUE #6: No Hardware Scaling for Non‑Mobile Layouts
-----------------------------------------------------
File: processing/worker.py, processing/filter_builder.py
Current Behavior: Non‑mobile (landscape) videos use CPU scaling (scale=...:flags=bilinear). Even when NVIDIA encoder is selected, scaling is done on CPU.
Why it's a problem: Wastes GPU potential; slower scaling on CPU.
Fixed Behavior: Use scale_cuda or scale_npp filters when use_nvidia=True.

NOTE: Issues 1 and 4 have already been fixed in this session. Issues 2, 3, and 6 remain to be addressed.
The user should review each item and confirm/deny before proceeding with fixes.